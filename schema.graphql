type PostContent @entity {
  id: ID!
  owner: Bytes!
  minPrice: Int!
  metadata: String!
  fromTimestamp: Int!
  toTimestamp: Int!
  successfulBid: Bidder
  right: DistributionRight
  inventory: Inventory!
  bids: [Bidder!] @derivedFrom(field: "bidPost")
  books: [Bidder!] @derivedFrom(field: "bookedPost")
}

type Bidder @entity {
  id: ID!
  post: PostContent!
  bookedPost: PostContent
  bidPost: PostContent
  sender: Bytes!
  right: DistributionRight
  price: BigInt!
  metadata: String
  status: DraftStatus!
  successful: Boolean!
}

type Inventory @entity {
  id: ID!
  owner: Bytes!
  posts: [PostContent!] @derivedFrom(field: "inventory")
}

type DistributionRight @entity {
  id: ID!
  owner: Bytes!
  post: PostContent!
  burned: Boolean!
}

enum DraftStatus {
  BOOKED
  LISTED
  CALLED
  PROPOSED
  DENIED
  ACCEPTED
  REFUNDED
}
